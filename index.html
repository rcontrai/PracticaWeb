<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <title>Task Editor</title>
    <meta name="theme-color" content="#D27A64"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link rel="apple-touch-icon" href="images/favicon.png">
    <link rel="manifest" href="manifest.json" crossorigin="use-credentials">
    <link type="text/css" rel="stylesheet" href="style.css">
    <!--
    <script>
      if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
              navigator.serviceWorker.register('sw.js').then(reg => {
                  console.log('service worker registered succesfully:', reg)
              }, function (err) {
                  console.log('service worker failed to load:', err)
              })
          })
      }
    </script>
    -->
  </head>
    <form> 
        <input class="firstButton" type="button" value="AÃ±adir tarea">
    </form>
    <dl id="tareaList">
        <dt><input id="btn1" class="tareaButton" type="button" value="tarea 1"></dt>
        <dt><input id="btn2" class="tareaButton" type="button" value="tarea 2"></dt>
        <dt><input id="btn3" class="tareaButton" type="button" value="tarea 3"></dt>
        <dt id="dtID"></dt>
      </dl>
    <!-- The Modal -->
    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <p>Introducir un nombre de tarea :</p>
            <input type="text" class="textInput" id="name" name="name" required
            minlength="0" maxlength="20" size="10">
            <div class="blockButton">
                <input id="btnAccept" class="popUpButton" type="button" value="Guardar">
                <input id="btnCancel" class="popUpButton" type="button" value="Cancelar">
            </div>
        </div>
  
    </div>
</html>


<script type="text/javascript">
var btn = document.querySelector('input');
var tareaList = document.getElementById("tareaList");
var txt = document.querySelector('p');
var modal = document.getElementById("myModal");
var span = document.getElementsByClassName("close")[0];
var button;

/*btnAccept.addEventListener('click', updateBtn);*/
btnAccept.addEventListener('click', addElement);
btnCancel.addEventListener('click', cancel);
/*function updateBtn() { 
    //button = tareaList.createElement("p");
    //tareaList.appendChild(button);
    
    button = tareaList.createElement("tareaButton",input, id="btn1", type="button", value="");
    //tareaList.body.appendChild(button);
    modal.style.display = "none";
}*/
function cancel() {
  document.getElementById("name").value = null;
  modal.style.display = "none";
}
function addElement () {
  if(document.getElementById("name").value != "") {
    var newDT = document.createElement("dt");
    var newButton = document.createElement("button");
    var newContent = document.createTextNode(document.getElementById("name").value);
    newButton.className = "tareaButton" ;
    newButton.appendChild(newContent);
    newDT.appendChild(newButton);
    var parentDiv = document.getElementById('dtID').parentNode;
    parentDiv.insertBefore(newDT, document.getElementById('dtID'));
    document.getElementById("name").value = null;
    modal.style.display = "none";
  }
}

btn.onclick = function() {
    modal.style.display = "block";
}
span.onclick = function() {
  modal.style.display = "none";
}

window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
</script>

